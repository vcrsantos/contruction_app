{% extends "base.html" %}
{% block content %}

<h2>Novo Gasto</h2>

<form method="post">
  <label>Valor</label>
  <input
    type="number"
    step="0.01"
    name="value"
    placeholder="Ex: 250.00"
    required
    autofocus
  >

  <label>Categoria</label>
  <select name="category_id" required>
    <option value="">-- Selecione --</option>
    {% for c in categories %}
      <option value="{{ c[0] }}">{{ c[1] }}</option>
    {% endfor %}
  </select>

  <label>Data</label>
  <input
    type="date"
    name="date"
    value="{{ today | e }}"
    required
  >

  <label>Casa</label>
  <select name="house_id" required>
    <option value="">-- Selecione a casa --</option>
    {% for house in houses %}
      <option value="{{ house[0] }}">{{ house[1] }}</option>
    {% endfor %}
  </select>

  <label>ObservaÃ§Ãµes</label>
  <textarea
    name="observations"
    placeholder="Detalhes adicionais sobre o gasto"
    rows="4"
  ></textarea>

  <button type="submit">ğŸ’¾ Salvar Gasto</button>
</form>

<h2>Gastos Cadastrados</h2>

<table>
  <thead>
    <tr>
      <th>Valor</th>
      <th>Categoria</th>
      <th>Casa</th>
      <th>Data</th>
      <th>ObservaÃ§Ãµes</th>
      <th>AÃ§Ãµes</th>
    </tr>
  </thead>
  <tbody>
    {% for g in expenses %}
      <tr>
        <td><strong>R$ {{ '%.2f'|format(g[1]) }}</strong></td>
        <td>{{ g[2] }}</td>
        <td>{{ g[4] }}</td>
        <td>{{ g[3] }}</td>
        <td>{{ g[5][:50] if g[5] else '-' }}</td>
        <td>
          <a href="/edit-expense/{{ g[0] }}">âœï¸</a>
          <a href="/remove-expense/{{ g[0] }}">ğŸ—‘ï¸</a>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
